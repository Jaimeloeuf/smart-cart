<script setup lang="ts">
import { useGroup } from "../../../store";
import { HomeRoute } from "../../../router";

const groupStore = useGroup();
const groupLink = `https://smartcart.huat/join/${groupStore.currentGroup.id}`;

const copyToClipboard = () => navigator.clipboard.writeText(groupLink);
const share = () =>
  navigator.share({
    url: groupLink,
    title: "Smart Cart group invite link ðŸ’›",
    text: "Join me to SMART CART the world!",
  });
</script>

<template>
  <div>
    <div class="mb-10 flex flex-row justify-center text-center">
      <span class="inline-block"></span>
      <p class="ml-5 grow text-2xl font-light">
        {{ groupStore.currentGroup.name }}
      </p>
      <router-link :to="{ name: HomeRoute.name }">Close</router-link>
    </div>

    <p class="my-6 font-Indie text-xl">
      Share this link with friends and family!
    </p>

    <div class="mb-6">
      <p class="mb-1 text-lg text-blue-500">Group Invite Link</p>
      <p class="rounded-lg border bg-blue-50 p-3">
        {{ groupLink }}
      </p>
    </div>

    <button
      class="mb-4 w-full rounded-lg bg-blue-500 p-3.5 font-medium text-white"
      @click="share"
    >
      <svg
        class="m-0 inline-block h-5 w-6 p-0"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M13.3333 17.7778C12.5926 17.7778 11.963 17.5185 11.4444 17C10.9259 16.4815 10.6667 15.8519 10.6667 15.1111C10.6667 15.0074 10.6741 14.8999 10.6889 14.7884C10.7037 14.677 10.7259 14.5772 10.7556 14.4889L4.48889 10.8444C4.23704 11.0667 3.95556 11.2409 3.64444 11.3671C3.33333 11.4933 3.00741 11.5561 2.66667 11.5556C1.92593 11.5556 1.2963 11.2963 0.777778 10.7778C0.259259 10.2593 0 9.62963 0 8.88889C0 8.14815 0.259259 7.51852 0.777778 7C1.2963 6.48148 1.92593 6.22222 2.66667 6.22222C3.00741 6.22222 3.33333 6.28533 3.64444 6.41156C3.95556 6.53778 4.23704 6.7117 4.48889 6.93333L10.7556 3.28889C10.7259 3.2 10.7037 3.10015 10.6889 2.98933C10.6741 2.87852 10.6667 2.77096 10.6667 2.66667C10.6667 1.92593 10.9259 1.2963 11.4444 0.777778C11.963 0.259259 12.5926 0 13.3333 0C14.0741 0 14.7037 0.259259 15.2222 0.777778C15.7407 1.2963 16 1.92593 16 2.66667C16 3.40741 15.7407 4.03704 15.2222 4.55556C14.7037 5.07407 14.0741 5.33333 13.3333 5.33333C12.9926 5.33333 12.6667 5.27052 12.3556 5.14489C12.0444 5.01926 11.763 4.84504 11.5111 4.62222L5.24444 8.26667C5.27407 8.35556 5.2963 8.4557 5.31111 8.56711C5.32593 8.67852 5.33333 8.78578 5.33333 8.88889C5.33333 8.99259 5.32593 9.10015 5.31111 9.21156C5.2963 9.32296 5.27407 9.42282 5.24444 9.51111L11.5111 13.1556C11.763 12.9333 12.0444 12.7594 12.3556 12.6338C12.6667 12.5081 12.9926 12.445 13.3333 12.4444C14.0741 12.4444 14.7037 12.7037 15.2222 13.2222C15.7407 13.7407 16 14.3704 16 15.1111C16 15.8519 15.7407 16.4815 15.2222 17C14.7037 17.5185 14.0741 17.7778 13.3333 17.7778Z"
          fill="white"
        />
      </svg>
      Share Link
    </button>

    <button
      class="w-full rounded-lg border border-blue-500 p-3.5 font-medium text-blue-500"
      @click="copyToClipboard"
    >
      <svg
        class="m-0 inline-block h-5 w-6 p-0"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M8.79457 12.859C8.91944 12.984 8.98959 13.1534 8.98959 13.33C8.98959 13.5067 8.91944 13.6761 8.79457 13.8011L7.96663 14.634C7.09105 15.509 5.90374 16.0004 4.66588 16C3.42802 15.9996 2.24102 15.5075 1.366 14.6319C0.490973 13.7563 -0.000390275 12.569 2.32587e-07 11.3312C0.00039074 10.0933 0.492503 8.90631 1.36808 8.03129L3.37713 6.02224C4.21814 5.18056 5.34901 4.69209 6.53832 4.65678C7.72764 4.62148 8.88549 5.04201 9.77494 5.83233C9.84057 5.89052 9.8941 5.96107 9.93246 6.03995C9.97083 6.11882 9.99328 6.20448 9.99854 6.29204C10.0038 6.3796 9.99176 6.46733 9.96312 6.55023C9.93447 6.63314 9.88978 6.70959 9.83158 6.77522C9.77339 6.84085 9.70284 6.89437 9.62396 6.93274C9.54509 6.9711 9.45942 6.99355 9.37187 6.99881C9.28431 7.00407 9.19658 6.99204 9.11368 6.96339C9.03077 6.93474 8.95432 6.89005 8.88869 6.83185C8.25342 6.26771 7.42663 5.96756 6.5774 5.9928C5.72817 6.01804 4.92067 6.36675 4.32002 6.96762L2.31097 8.97418C1.68601 9.59913 1.33492 10.4467 1.33492 11.3306C1.33492 12.2144 1.68601 13.062 2.31097 13.687C2.93592 14.3119 3.78354 14.663 4.66735 14.663C5.55117 14.663 6.39879 14.3119 7.02374 13.687L7.85168 12.859C7.91357 12.7971 7.98706 12.7479 8.06796 12.7144C8.14885 12.6808 8.23556 12.6636 8.32313 12.6636C8.4107 12.6636 8.49741 12.6808 8.5783 12.7144C8.65919 12.7479 8.73269 12.7971 8.79457 12.859ZM14.6318 1.36444C13.7561 0.490697 12.5696 0 11.3325 0C10.0955 0 8.90897 0.490697 8.03326 1.36444L7.20532 2.19321C7.0804 2.31825 7.01026 2.48779 7.01034 2.66453C7.01042 2.84128 7.0807 3.01076 7.20574 3.13568C7.33077 3.26061 7.50031 3.33074 7.67706 3.33067C7.85381 3.33059 8.02329 3.2603 8.14821 3.13527L8.97615 2.30732C9.60111 1.68237 10.4487 1.33128 11.3325 1.33128C12.2164 1.33128 13.064 1.68237 13.6889 2.30732C14.3139 2.93228 14.665 3.77989 14.665 4.66371C14.665 5.54753 14.3139 6.39515 13.6889 7.0201L11.6799 9.03082C11.0789 9.63134 10.2712 9.9796 9.42199 10.0044C8.57277 10.0291 7.74616 9.72856 7.1112 9.16409C6.97865 9.04656 6.80485 8.98651 6.62803 8.99713C6.4512 9.00775 6.28584 9.08818 6.16831 9.22073C6.05079 9.35327 5.99073 9.52708 6.00135 9.7039C6.01198 9.88073 6.09241 10.0461 6.22495 10.1636C7.1142 10.9541 8.27192 11.375 9.46124 11.34C10.6506 11.305 11.7815 10.8168 12.6228 9.97537L14.6318 7.96632C15.5061 7.09055 15.9971 5.90366 15.9971 4.66621C15.9971 3.42876 15.5061 2.24187 14.6318 1.3661V1.36444Z"
          fill="#45719E"
        />
      </svg>
      Copy Link
    </button>
  </div>
</template>
